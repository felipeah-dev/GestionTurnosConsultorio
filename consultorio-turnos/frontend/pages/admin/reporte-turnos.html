<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Turnos - Admin</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Estilos CSS -->
    <link rel="stylesheet" href="../../css/global.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/forms.css">
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar" style="border-top: 4px solid var(--color-danger);">
        <div class="navbar-brand">
            <span class="logo-icon">üè•</span> Consultorio M√©dico <span
                style="font-size: 0.8rem; font-weight: normal; margin-left:10px; opacity:0.8;">[M√≥dulo Admin]</span>
        </div>
        <div class="navbar-user">
            <div class="user-name">Admin Principal</div>
            <span class="badge badge-rol" style="background-color: var(--color-danger); color: white;">Admin</span>
            <button class="btn btn-secundario" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;">Cerrar
                sesi√≥n</button>
        </div>
    </nav>

    <!-- √Årea de Notificaciones -->
    <div id="notification-area" class="oculto"></div>

    <!-- Spinner Global -->
    <div id="loading-spinner" class="spinner oculto"></div>

    <!-- Contenido Principal -->
    <main>
        <div class="d-flex justify-content-between align-items-center mb-4" style="flex-wrap: wrap; gap: 1rem;">
            <h1>Estad√≠sticas: Asistencias y Cancelaciones</h1>
            <a href="reportes.html" class="btn btn-secundario px-4" style="text-decoration: none;">‚Üê Volver al
                Centro</a>
        </div>

        <!-- Filtros del Reporte -->
        <div class="card mb-4" style="padding: 1rem;">
            <div class="filtros-fila" style="margin: 0;">
                <div class="form-grupo">
                    <label for="fecha-desde">Fecha Inicio</label>
                    <input type="date" id="fecha-desde" class="form-control" value="2026-04-01">
                </div>

                <div class="form-grupo">
                    <label for="fecha-hasta">Fecha Fin</label>
                    <input type="date" id="fecha-hasta" class="form-control" value="2026-04-30">
                </div>

                <div class="form-grupo">
                    <label for="filtro-medico-reporte">M√©dico (Opcional)</label>
                    <select id="filtro-medico-reporte" class="form-control">
                        <option value="todos">Todos los m√©dicos</option>
                        <option value="101">Dr. Roberto S√°nchez</option>
                        <option value="102">Dra. Mar√≠a Gonz√°lez</option>
                    </select>
                </div>

                <div class="form-grupo" style="align-self: flex-end;">
                    <button id="btn-generar-reporte" class="btn btn-primario w-100" style="height: 42px;">Generar
                        Reporte</button>
                </div>
            </div>
        </div>

        <!-- KPIs Resumen Generado (Visible via JS) -->
        <div id="reporte-resumen" class="grid-4 mb-4">
            <div class="card card-resumen">
                <h3 class="card-title">Total Generados</h3>
                <div id="rpt-total" class="valor" style="color: var(--color-primary);">420</div>
            </div>
            <div class="card card-resumen">
                <h3 class="card-title">Completados</h3>
                <div id="rpt-completados" class="valor" style="color: var(--color-success);">315</div>
                <p class="texto-muted mt-1" style="font-size: 0.8rem;">(75% Asistencia)</p>
            </div>
            <div class="card card-resumen">
                <h3 class="card-title">Cancelados (Pac.)</h3>
                <div id="rpt-cancelados" class="valor" style="color: var(--color-warning);">60</div>
                <p class="texto-muted mt-1" style="font-size: 0.8rem;">(14%)</p>
            </div>
            <div class="card card-resumen">
                <h3 class="card-title">Ausentes / Otros</h3>
                <div id="rpt-ausentes" class="valor" style="color: var(--color-danger);">45</div>
                <p class="texto-muted mt-1" style="font-size: 0.8rem;">(11%)</p>
            </div>
        </div>

        <!-- Tabla Detallada -->
        <h3 class="mb-3">Desglose por fecha</h3>
        <div class="tabla-container">
            <table class="tabla text-center">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>M√©dico</th>
                        <th>Total Agendados</th>
                        <th>Completados</th>
                        <th>Cancelados</th>
                        <th>Tasa Asistencia</th>
                    </tr>
                </thead>
                <tbody id="reporte-tabla-body">
                    <tr>
                        <td>2026-04-10</td>
                        <td>Dr. Roberto S√°nchez</td>
                        <td>20</td>
                        <td style="color: var(--color-success); font-weight: 600;">16</td>
                        <td style="color: var(--color-danger); font-weight: 600;">4</td>
                        <td>80%</td>
                    </tr>
                    <tr>
                        <td>2026-04-10</td>
                        <td>Dra. Mar√≠a Gonz√°lez</td>
                        <td>15</td>
                        <td style="color: var(--color-success); font-weight: 600;">14</td>
                        <td style="color: var(--color-danger); font-weight: 600;">1</td>
                        <td>93.3%</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2026 Sistema de Gesti√≥n de Turnos para Consultorio M√©dico.</p>
    </footer>

    <script src="../../js/ui.js"></script>
    <script src="../../js/api.js"></script>

</body>

</html>